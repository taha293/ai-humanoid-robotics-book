---
title: Week 5 - ROS2 Packages, Python Packages, and URDF
description: Understanding ROS2 packages, Python integration, and Unified Robot Description Format
tags: [ros2, packages, python, urdf, robot-description]
---

# Week 5 - ROS2 Packages, Python Packages, and URDF

In this final week of Module 1, we'll explore ROS2 packages, Python integration, and the Unified Robot Description Format (URDF) - essential components for building complete robotic systems.

## Learning Objectives

By the end of this week, you will be able to:
- Create and structure ROS2 packages properly
- Integrate Python packages with ROS2
- Create and interpret URDF robot descriptions
- Use launch files to start complex robot systems
- Understand the relationship between software packages and robot models

## 1. ROS2 Package Structure

A ROS2 package is the basic building block of a ROS2 system. Each package contains source code, configuration files, and dependencies organized in a standardized way.

### Package Directory Structure

```
my_robot_package/
├── CMakeLists.txt          # Build configuration for C++
├── package.xml             # Package metadata and dependencies
├── src/                    # Source code files
├── include/                # Header files (C++)
├── scripts/                # Executable scripts (Python, etc.)
├── launch/                 # Launch files
├── config/                 # Configuration files
├── test/                   # Unit tests
└── README.md               # Package documentation
```

### package.xml Example

```xml
<?xml version="1.0"?>
<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>
<package format="3">
  <name>my_robot_package</name>
  <version>0.0.0</version>
  <description>Package for my robot functionality</description>
  <maintainer email="user@example.com">User Name</maintainer>
  <license>Apache License 2.0</license>

  <depend>rclpy</depend>
  <depend>std_msgs</depend>
  <depend>sensor_msgs</depend>

  <test_depend>ament_copyright</test_depend>
  <test_depend>ament_flake8</test_depend>
  <test_depend>ament_pep257</test_depend>
  <test_depend>python3-pytest</test_depend>

  <export>
    <build_type>ament_python</build_type>
  </export>
</package>
```

## 2. Python Package Integration

ROS2 provides excellent integration with Python packages, allowing you to leverage the vast Python ecosystem in your robotic applications.

### Creating a Python Package in ROS2

```python
# setup.py
from setuptools import setup
import os
from glob import glob

package_name = 'my_robot_package'

setup(
    name=package_name,
    version='0.0.0',
    packages=[package_name],
    data_files=[
        ('share/ament_index/resource_index/packages',
            ['resource/' + package_name]),
        ('share/' + package_name, ['package.xml']),
        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),
        (os.path.join('share', package_name, 'config'), glob('config/*.yaml')),
    ],
    install_requires=['setuptools'],
    zip_safe=True,
    maintainer='Your Name',
    maintainer_email='your.email@example.com',
    description='Package for my robot functionality',
    license='Apache License 2.0',
    tests_require=['pytest'],
    entry_points={
        'console_scripts': [
            'robot_controller = my_robot_package.robot_controller:main',
            'sensor_processor = my_robot_package.sensor_processor:main',
        ],
    },
)
```

### Using External Python Libraries

ROS2 packages can use any Python library, making it easy to integrate advanced functionality:

```python
import rclpy
from rclpy.node import Node
import numpy as np
import cv2  # OpenCV for computer vision
import yaml  # For configuration files

class SensorProcessor(Node):
    def __init__(self):
        super().__init__('sensor_processor')

        # Use numpy for efficient array operations
        self.calibration_matrix = np.array([
            [1.0, 0.0, 0.0],
            [0.0, 1.0, 0.0],
            [0.0, 0.0, 1.0]
        ])

        # Use OpenCV for image processing
        self.image_sub = self.create_subscription(
            sensor_msgs.msg.Image,
            'camera/image_raw',
            self.image_callback,
            10
        )
```

## 3. Unified Robot Description Format (URDF)

URDF (Unified Robot Description Format) is an XML format for representing a robot model. It describes the robot's physical and visual properties, including links, joints, and materials.

### Basic URDF Structure

```xml
<?xml version="1.0"?>
<robot name="simple_robot">
  <!-- Base link -->
  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.5 0.5 0.2"/>
      </geometry>
      <material name="blue">
        <color rgba="0 0 0.8 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <box size="0.5 0.5 0.2"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
    </inertial>
  </link>

  <!-- Wheel links -->
  <link name="wheel_front_left">
    <visual>
      <geometry>
        <cylinder radius="0.1" length="0.05"/>
      </geometry>
      <material name="black">
        <color rgba="0 0 0 1"/>
      </material>
    </visual>
  </link>

  <!-- Joints connecting links -->
  <joint name="wheel_front_left_joint" type="continuous">
    <parent link="base_link"/>
    <child link="wheel_front_left"/>
    <origin xyz="0.2 0.2 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
  </joint>
</robot>
```

### URDF with Xacro

Xacro is a macro language that simplifies complex URDF files:

```xml
<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="robot_with_xacro">
  <xacro:property name="M_PI" value="3.1415926535897931" />

  <xacro:macro name="wheel" params="prefix parent *origin">
    <joint name="${prefix}_wheel_joint" type="continuous">
      <xacro:insert_block name="origin" />
      <parent link="${parent}"/>
      <child link="${prefix}_wheel"/>
      <axis xyz="0 1 0"/>
    </joint>

    <link name="${prefix}_wheel">
      <visual>
        <geometry>
          <cylinder radius="0.1" length="0.05"/>
        </geometry>
      </visual>
    </link>
  </xacro:macro>

  <!-- Use the macro -->
  <xacro:wheel prefix="front_left" parent="base_link">
    <origin xyz="0.2 0.2 0" rpy="0 0 0"/>
  </xacro:wheel>
</robot>
```

## 4. Launch Files

Launch files allow you to start multiple nodes with a single command and configure their parameters.

### Python Launch File

```python
# launch/my_robot.launch.py
from launch import LaunchDescription
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration
from launch_ros.actions import Node

def generate_launch_description():
    return LaunchDescription([
        DeclareLaunchArgument(
            'use_sim_time',
            default_value='false',
            description='Use simulation clock if true'
        ),

        Node(
            package='my_robot_package',
            executable='robot_controller',
            name='robot_controller',
            parameters=[
                {'use_sim_time': LaunchConfiguration('use_sim_time')},
                {'robot_name': 'my_robot'}
            ],
            output='screen'
        ),

        Node(
            package='my_robot_package',
            executable='sensor_processor',
            name='sensor_processor',
            parameters=[
                {'use_sim_time': LaunchConfiguration('use_sim_time')}
            ],
            output='screen'
        )
    ])
```

## Practical Exercise

Create a complete ROS2 package for a simple mobile robot with the following components:
1. A URDF model of a differential drive robot with wheels
2. A Python node that controls the robot's movement
3. A launch file that starts the robot controller with appropriate parameters
4. Configuration files for robot parameters

### Requirements
- ROS2 Humble Hawksbill
- Understanding of previous weeks' concepts

### Expected Outcome
A working ROS2 package that models a simple robot and allows basic movement control.

## Summary

This week completed Module 1 by covering essential ROS2 development concepts: package structure, Python integration, URDF robot modeling, and launch systems. You now have a solid foundation in ROS2 architecture and are ready to explore simulation environments in Module 2. The concepts learned here form the basis for building complex robotic systems that we'll simulate and control in the upcoming modules.